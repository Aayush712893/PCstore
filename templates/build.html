{% extends "base.html" %}

{% block title %}Build - Your PC{% endblock %}

{% block content %}
<h2 style="text-align:center; font-family:'Bahnschrift SemiBold', sans-serif; margin-bottom:20px;">
  Build Your PC
</h2>

<!-- ✅ Error message (if any) -->
{% if error %}
  <p style="color:red; text-align:center; font-weight:bold; margin-bottom:15px;">
    {{ error }}
  </p>
{% endif %}

<form method="POST" action="/build" style="max-width: 700px; margin: auto; text-align: left;">

  <!-- User details -->
  <label for="customer_name">Your Name</label><br>
  <input id="customer_name" name="customer_name" type="text" required
         placeholder="e.g., Aayush Tiwary"
         style="width:100%; padding:10px; margin-bottom:12px;"><br>

  <label for="whatsapp">WhatsApp Number</label><br>
  <input id="whatsapp" name="whatsapp" type="tel" required
         placeholder="+91 98xxxxxxx"
         style="width:100%; padding:10px; margin-bottom:18px;"><br>

  <hr style="margin:20px 0;">

  <!-- Processor Brand -->
  <label for="brand">Processor Brand</label><br>
  <select id="brand" name="brand" onchange="updateComponents()" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option value="">-- Select --</option>
    <option value="intel">Intel</option>
    <option value="amd">AMD</option>
  </select>

  <!-- Processor -->
  <label for="processor">Processor</label><br>
  <select id="processor" name="processor" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option value="">-- Select a brand first --</option>
  </select>

  <!-- Motherboard -->
  <label for="motherboard">Motherboard</label><br>
  <select id="motherboard" name="motherboard" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option value="">-- Select a brand first --</option>
  </select>

  <!-- RAM -->
  <label for="ram">RAM</label><br>
  <select id="ram" name="ram" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option>8GB DDR3</option>
    <option>16GB DDR3</option>
    <option>8GB DDR4</option>
    <option>16GB DDR4</option>
    <option>32GB DDR4</option>
    <option>16GB DDR5</option>
    <option>32GB DDR5</option>
    <option>64GB DDR5</option>
  </select>

  <!-- SSD -->
  <label for="ssd">SSD</label><br>
  <select id="ssd" name="ssd" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option>256GB SATA SSD</option>
    <option>512GB SATA SSD</option>
    <option>1TB SATA SSD</option>
    <option>512GB NVMe Gen3</option>
    <option>1TB NVMe Gen3</option>
    <option>1TB NVMe Gen4</option>
    <option>2TB NVMe Gen4</option>
    <option>2TB NVMe Gen5</option>
  </select>

  <!-- GPU -->
  <label for="gpu">Graphics Card</label><br>
  <select id="gpu" name="gpu" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option>NVIDIA GTX 750 Ti</option>
    <option>NVIDIA GTX 1060</option>
    <option>NVIDIA GTX 1660</option>
    <option>NVIDIA RTX 2060</option>
    <option>NVIDIA RTX 3060</option>
    <option>NVIDIA RTX 4070</option>
    <option>NVIDIA RTX 4090</option>
    <option>AMD RX 550</option>
    <option>AMD RX 580</option>
    <option>AMD RX 6700 XT</option>
    <option>AMD RX 7900 XTX</option>
  </select>

  <!-- PSU -->
  <label for="psu">Power Supply (PSU)</label><br>
  <select id="psu" name="psu" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option>450W Bronze</option>
    <option>500W Bronze</option>
    <option>650W Bronze</option>
    <option>750W Gold</option>
    <option>850W Gold</option>
    <option>1000W Platinum</option>
  </select>

  <!-- Cooling -->
  <label for="cooling">Cooling Fans</label><br>
  <select id="cooling" name="cooling" required style="width:100%; padding:10px; margin:6px 0 16px;">
    <option>1 x 120mm Fan</option>
    <option>2 x 120mm Fans</option>
    <option>3 x 120mm Fans</option>
    <option>2 x 140mm Fans</option>
  </select>

  <!-- AIO -->
  <label for="aio">AIO Cooler</label><br>
  <select id="aio" name="aio" required style="width:100%; padding:10px; margin:6px 0 18px;">
    <option>No AIO</option>
    <option>120mm AIO</option>
    <option>240mm AIO</option>
    <option>360mm AIO</option>
  </select>

  <!-- ✅ Comments at the bottom -->
  <label for="comments">Comments (optional)</label>
  <small style="display:block; color:#666; margin-bottom:6px;">
    You can comment the parts which you were not able to find in the form above.
  </small>
  <textarea id="comments" name="comments" rows="4"
            placeholder="Write missing parts or special requests here..."
            style="width:100%; padding:10px; margin-bottom:18px;"></textarea>

  <button type="submit"
          style="width:100%; padding:12px; background:#007bff; color:white; border:none; border-radius:6px; font-size:16px;">
    Save Build
  </button>
</form>

<script>
// Simple catalog for Intel / AMD
const CATALOG = {
  intel: {
    processors: [
      "Intel Core i3-10100", "Intel Core i5-10400", "Intel Core i5-11400",
      "Intel Core i5-12400F", "Intel Core i5-13400F", "Intel Core i7-12700",
      "Intel Core i7-13700", "Intel Core i9-13900K", "Intel Core i5-14400F"
    ],
    motherboards: [
      "H61 (LGA1155)", "B460 (LGA1200)", "H510 (LGA1200)", "B560 (LGA1200)",
      "B660 (LGA1700)", "H670 (LGA1700)", "B760 (LGA1700)", "Z690 (LGA1700)"
    ]
  },
  amd: {
    processors: [
      "Ryzen 3 3100", "Ryzen 5 3600", "Ryzen 5 5600", "Ryzen 5 5600G",
      "Ryzen 5 7600", "Ryzen 7 5700X", "Ryzen 7 7700", "Ryzen 9 7900",
      "Ryzen 5 8500G"
    ],
    motherboards: [
      "A320 (AM4)", "B450 (AM4)", "B550 (AM4)", "X570 (AM4)",
      "A620 (AM5)", "B650 (AM5)", "X670 (AM5)"
    ]
  }
};

function clearSelect(sel, placeholder) {
  sel.innerHTML = "";
  const opt = document.createElement("option");
  opt.value = "";
  opt.textContent = placeholder;
  sel.appendChild(opt);
}

function populateSelect(sel, items) {
  items.forEach(txt => {
    const o = document.createElement("option");
    o.textContent = txt;
    o.value = txt;
    sel.appendChild(o);
  });
}

function updateComponents() {
  const brand = document.getElementById("brand").value;
  const procSel = document.getElementById("processor");
  const moboSel = document.getElementById("motherboard");

  if (!brand || !CATALOG[brand]) {
    clearSelect(procSel, "-- Select a brand first --");
    clearSelect(moboSel, "-- Select a brand first --");
    return;
    }

  clearSelect(procSel, "-- Select processor --");
  clearSelect(moboSel, "-- Select motherboard --");
  populateSelect(procSel, CATALOG[brand].processors);
  populateSelect(moboSel, CATALOG[brand].motherboards);
}
</script>
{% endblock %}
