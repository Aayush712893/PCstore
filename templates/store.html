{% extends "base.html" %}
{% block title %}Store - Your PC{% endblock %}

{% block content %}
<h2 style="text-align:center; margin-bottom:12px;">Prebuilt PCs</h2>

<!-- Cart summary at top -->
<div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px;">
  <div>
    <strong>Items in cart:</strong> {{ cart_count }}
  </div>
  <div>
    <strong>Total:</strong> ₹{{ cart_total }}
  </div>
</div>

<div class="prebuild-grid">
  {% for pc in prebuilds %}
  <div class="card">
    <img src="{{ url_for('static', filename=pc.image) }}" alt="{{ pc.name }}">
    <div class="card-body">
      <div class="card-title">{{ pc.name }}</div>
      <div class="card-price">₹{{ pc.price }}</div>
      <p style="margin:8px 0; color:var(--muted); font-size:14px;">
        {% for s in pc.specs[:3] %}
          <div>{{ s }}</div>
        {% endfor %}
        <small>...more specs on product page</small>
      </p>

      <!-- Add to cart form (POST) -->
      <form method="POST" action="{{ url_for('add_to_cart', pc_id=pc.id) }}">
        <button type="submit" class="btn" style="width:100%;">Add to Cart</button>
      </form>
    </div>
  </div>
  {% endfor %}
</div>

<!-- Proceed button fixed at bottom of store page -->
<div style="margin-top:24px; text-align:center;">
  {% if cart_count > 0 %}
    <a href="{{ url_for('shipping') }}" class="btn" style="padding:12px 24px; font-size:16px;">
      Proceed to Checkout ({{ cart_count }} item{% if cart_count > 1 %}s{% endif %})
    </a>
  {% else %}
    <button class="btn" style="padding:12px 24px; font-size:16px;" disabled>
      Your cart is empty — add items to proceed
    </button>
  {% endif %}
</div>

{% endblock %}
